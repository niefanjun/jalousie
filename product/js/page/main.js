define(function(require,exports,module){var $=require("jquery");var Change_Speed=500;var now;var page={url:[],flag:999};function showt3(){$("#t3").animate({opacity:1,top:0},300)}function cloudpass(){if(now.attr("id")=="y1"){now=$(".yun#y2")}else{if(now.attr("id")=="y2"){now=$(".yun#y3")}else{if(now.attr("id")=="y3"){now=$(".yun#y1")}}}now.css("left","1024px");now.animate({left:-1024},20000);setTimeout(cloudpass,10000)}function movepage1(){$(".page1").animate({textIndent:0},{step:function(now,fx){$(this).css("-webkit-transform","rotateY("+now+"deg)")},complete:function(){if($(this).hasClass("row1")){loadpage(2)}},duration:Change_Speed},"linear")}function movepage2(){$(".page2").removeClass("noshow");$(".page2").animate({textIndent:0},{step:function(now,fx){$(this).css("-webkit-transform","rotateY("+now+"deg)")},complete:function(){if($(this).hasClass("row1")){loadpage(3)}},duration:Change_Speed},"linear");$(".page1").animate({textIndent:-90},{step:function(now,fx){$(this).css("-webkit-transform","rotateY("+now+"deg)")},complete:function(){$(this).addClass("noshow")},duration:Change_Speed},"linear")}function movepage3(){$(".page3").removeClass("noshow");$(".page3").animate({textIndent:0},{step:function(now,fx){$(this).css("-webkit-transform","rotateY("+now+"deg)")},complete:function(){if($(this).hasClass("row1")){loadfinal()}},duration:Change_Speed},"linear");$(".page2").animate({textIndent:-90},{step:function(now,fx){$(this).css("-webkit-transform","rotateY("+now+"deg)")},complete:function(){$(this).addClass("noshow")},duration:Change_Speed},"linear")}function showfinal(){$(".final").animate({opacity:1},1000,function(){loadtitle()})}function showtitle(){$("#t1").animate({opacity:1},300,function(){$("#t2").animate({opacity:1,top:0},300);setTimeout(showt3,50);showcloud()})}function showcloud(){now=$(".yun#y1");$(".yun").animate({opacity:1},500,function(){if($(this).hasClass("top")&&$(this).attr("id")=="y1"){loadlight()}});now.animate({left:-1024},10000);cloudpass()}function showlight(){$(".light").animate({opacity:0.5},500)}function loadpage(num){page.url=["../image/"+num+"-1.png","../image/"+num+"-2.png","../image/"+num+"-3.png","../image/"+num+"-4.png"];page.flag=4;var img=new Array();var index;for(var key in page.url){img[key]=new Image();img[key].src=page.url[key];img[key].onload=function(key){page.flag--;var index=parseInt(key);index++;$(img[key]).addClass("page"+num+" row"+index+" noshow");var now_row="#c"+index;$(now_row).append(img[key]);if(page.flag<=0){if(num==2){setTimeout(movepage2,2000)}if(num==3){setTimeout(movepage3,2000)}}}(key)}}function loadfinal(){var img=new Image();img.src="../image/final.png";img.onload=function(){$(img).addClass("final");$(".main").append(img);setTimeout(showfinal,1000)}}function loadtitle(){page.url=["../image/title-1.png","../image/title-2.png","../image/title-3.png"];page.flag=3;var img=new Array();for(var key in page.url){img[key]=new Image();img[key].src=page.url[key];img[key].onload=function(key){page.flag--;var index=parseInt(key);index++;$(img[key]).attr("id","t"+index);$(".title").append(img[key]);if(page.flag<=0){showtitle()}}(key)}}function loadlight(){var img=new Image();img.src="../image/l.png";img.onload=function(){$(img).addClass("light");$(".main").append(img);setTimeout(showlight,500)}}$(document).ready(function(){movepage1()})});